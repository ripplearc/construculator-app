<?xml version="1.0" encoding="UTF-8"?>
<mutations version="1.0">
    <!-- REMOTE COST ESTIMATION LOG DATA SOURCE MUTATION TESTING -->
    <!-- Targets: Data source implementation for fetching cost estimation logs -->

    <files>
        <file>lib/features/estimation/data/data_source/remote_cost_estimation_log_data_source.dart</file>
    </files>

    <exclude>
        <!-- Exclude override annotations -->
        <regex pattern="@override" dotAll="false"/>

        <!-- Exclude imports -->
        <regex pattern="^import\s" dotAll="false"/>
    </exclude>

    <rules>
        <!-- RULE 1: Use wrong table name -->
        <regex pattern="table: DatabaseConstants\.costEstimationLogsTable," dotAll="true" id="log_datasource.wrong_table">
            <mutation text="table: 'wrong_table',"/>
        </regex>

        <!-- RULE 2: Use wrong filter column -->
        <regex pattern="filterColumn: DatabaseConstants\.estimateIdColumn," dotAll="true" id="log_datasource.wrong_filter_column">
            <mutation text="filterColumn: 'wrong_column',"/>
        </regex>

        <!-- RULE 3: Use wrong order column -->
        <regex pattern="orderColumn: DatabaseConstants\.loggedAtColumn," dotAll="true" id="log_datasource.wrong_order_column">
            <mutation text="orderColumn: 'created_at',"/>
        </regex>

        <!-- RULE 4: Use ascending instead of descending order -->
        <regex pattern="ascending: false," dotAll="true" id="log_datasource.wrong_order_direction">
            <mutation text="ascending: true,"/>
        </regex>

        <!-- RULE 5: Use wrong rangeFrom parameter -->
        <regex pattern="rangeFrom: rangeFrom," dotAll="true" id="log_datasource.wrong_rangefrom">
            <mutation text="rangeFrom: 0,"/>
        </regex>

        <!-- RULE 6: Use wrong rangeTo parameter -->
        <regex pattern="rangeTo: rangeTo," dotAll="true" id="log_datasource.wrong_rangeto">
            <mutation text="rangeTo: rangeFrom,"/>
        </regex>

        <!-- RULE 7: Skip DTO conversion -->
        <regex pattern="\.map\(\(json\) =&gt; CostEstimationLogDto\.fromJson\(json\)\)" dotAll="true" id="log_datasource.skip_dto_conversion">
            <mutation text=".map((json) => json as CostEstimationLogDto)"/>
        </regex>

        <!-- RULE 8: Return empty list instead of results -->
        <regex pattern="return results\s*\.map\(\(json\) =&gt; CostEstimationLogDto\.fromJson\(json\)\)\s*\.toList\(\);" dotAll="true" id="log_datasource.return_empty">
            <mutation text="return [];"/>
        </regex>

        <!-- RULE 9: Use wrong filterValue -->
        <regex pattern="filterValue: estimateId," dotAll="true" id="log_datasource.wrong_filter_value">
            <mutation text="filterValue: 'wrong-id',"/>
        </regex>
    </rules>

    <commands>
        <command group="remote_cost_estimation_log_data_source" expected-return="0">flutter test test/features/estimation/data/data_source/remote_cost_estimation_log_data_source_test.dart</command>
    </commands>

    <threshold failure="85">
        <rating over="90" name="A"/>
        <rating over="80" name="B"/>
        <rating over="70" name="C"/>
        <rating over="60" name="D"/>
        <rating over="40" name="E"/>
        <rating over="0" name="F"/>
    </threshold>
</mutations>
